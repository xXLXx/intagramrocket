var wpcr3=wpcr3||{};wpcr3.mousemove_total=0,wpcr3.keypress_total=0,wpcr3.mousemove_need=5,wpcr3.keypress_need=5,wpcr3.getPostUrl=function(r){var e=r.attr("data-ajaxurl");return e=JSON.parse(e),e=e.join(".").replace(/\|/g,"/")},wpcr3.onhover=function(){var r=jQuery;r(".wpcr3_respond_2 .wpcr3_rating_stars").unbind("click.wpcr3"),r(".wpcr3_respond_2 .wpcr3_rating_style1_base").addClass("wpcr3_hide"),r(".wpcr3_respond_2 .wpcr3_rating_style1_status").removeClass("wpcr3_hide")},wpcr3.set_hover=function(){var r=jQuery;r(".wpcr3_frating").val(""),r(".wpcr3_respond_2 .wpcr3_rating_stars").unbind("click.wpcr3"),wpcr3.onhover()},wpcr3.showform=function(){var r=jQuery,e=r(this),t=e.closest(".wpcr3_respond_1"),c=t.find(".wpcr3_respond_3 .wpcr3_show_btn"),n=t.find(".wpcr3_respond_2");n.slideToggle(400,function(){t.find(".wpcr3_table_2").find("input:text:visible:first").focus(),n.is(":visible")?c.addClass("wpcr3_hide"):c.removeClass("wpcr3_hide")})},wpcr3.ajaxPost=function(r,e,t){return jQuery.ajax({type:"POST",url:wpcr3.getPostUrl(r),data:e,dataType:"json",success:function(r){return r.err.length?(r.err=r.err.join("\n"),alert(r.err),wpcr3.enableSubmit(),t(r.err)):t(null,r)},error:function(r){alert("An unknown error has occurred. E01"),wpcr3.enableSubmit()}})},wpcr3.submit=function(r){var e=jQuery,t=e(this),c=t.closest(".wpcr3_respond_1");r.preventDefault();var n=c.find(".wpcr3_div_2"),p=n.find(".wpcr3_submit_btn"),a=c.find(".wpcr3_fconfirm1"),i=c.find(".wpcr3_fconfirm2"),o=c.find(".wpcr3_fconfirm3"),s=c.find(".wpcr3_fake_website");c.find(".wpcr3_fake_url");if(p.hasClass("wpcr3_disabled"))return!1;if(wpcr3.mousemove_total<=wpcr3.mousemove_need||wpcr3.keypress_total<=wpcr3.keypress_need)return alert("You did not pass our human detection check. Code "+wpcr3.mousemove_total+","+wpcr3.keypress_total),!1;var d=a.is(":checked")===!0,_=i.is(":checked")===!1,w=o.is(":checked")===!1,l=s.val().length>0;if(d||w||l)return alert("You did not pass our bot detection check. Code "+d+","+w+","+l),!1;if(_)return alert("You must check the box to confirm you are human."),!1;var u=n.find("input,textarea"),f=[];if(e.each(u,function(r,t){if(t=e(t),t.hasClass("wpcr3_required")&&0===e.trim(t.val()).length){var c=n.find('label[for="'+t.attr("id")+'"]'),p="";p=c.length?e.trim(c.text().replace(":",""))+" is required.":"A required field has not been filled out.",f.push(p)}}),f.length>0)return f=f.join("\n"),alert(f),!1;p.addClass("wpcr3_disabled");var v=c.attr("data-postid");n.find(".wpcr3_checkid").remove(),n.append('<input type="hidden" name="wpcr3_checkid" class="wpcr3_checkid" value="'+v+'" />'),n.append('<input type="hidden" name="wpcr3_ajaxAct" class="wpcr3_checkid" value="form" />'),u=n.find("input,textarea");var m={};u.each(function(r,t){t=e(t),val=t.val(),"checkbox"===t.attr("type")&&t.is(":checked")===!1&&(val="0"),m[t.attr("name")]=val}),wpcr3.ajaxPost(c,m,function(r,t){r||(alert("Thank you! Your review has been received and will be posted soon."),e(window).scrollTop(0),wpcr3.clearFields(),c.find(".wpcr3_cancel_btn").click())})},wpcr3.clearFields=function(){var r=jQuery,e=r(".wpcr3_div_2"),t=e.find("input,textarea");wpcr3.enableSubmit(),t.attr("autocomplete","off").not('[type="checkbox"], [type="hidden"]').val("")},wpcr3.enableSubmit=function(){var r=jQuery,e=r(".wpcr3_div_2"),t=e.find(".wpcr3_submit_btn");t.removeClass("wpcr3_disabled")},wpcr3.init=function(){var r=jQuery;r(".wpcr3_respond_3 .wpcr3_show_btn, .wpcr3_respond_2 .wpcr3_cancel_btn").click(wpcr3.showform);var e="mousemove.wpcr3 touchmove.wpcr3";r(document).bind(e,function(){wpcr3.mousemove_total++,wpcr3.mousemove_total>wpcr3.mousemove_need&&r(document).unbind(e)});var t="keypress.wpcr3 keydown.wpcr3";r(document).bind(t,function(){wpcr3.keypress_total++,wpcr3.keypress_total>wpcr3.keypress_need&&r(document).unbind(t)}),r(".wpcr3_respond_2 .wpcr3_rating_style1_score > div").click(function(e){e.preventDefault(),e.stopImmediatePropagation();var t=r(this).html(),c=20*t+"%";return r(".wpcr3_frating").val(t),r(".wpcr3_respond_2 .wpcr3_rating_style1_base").removeClass("wpcr3_hide"),r(".wpcr3_respond_2 .wpcr3_rating_style1_average").css("width",c),r(".wpcr3_respond_2 .wpcr3_rating_style1_status").addClass("wpcr3_hide"),r(".wpcr3_respond_2 .wpcr3_rating_stars").unbind("mouseover.wpcr3").bind("click.wpcr3",wpcr3.set_hover),!1}),r(".wpcr3_respond_2 .wpcr3_rating_stars").bind("mouseover.wpcr3",wpcr3.onhover);var c=function(e){e.preventDefault();var t=r(this);if(t.hasClass("wpcr3_disabled"))return!1;var c=t.parents(".wpcr3_respond_1:first"),n=t.parents(".wpcr3_pagination:first"),p=c.find(".wpcr3_reviews_holder"),a=t.attr("data-page"),i=n.attr("data-page-opts"),o=c.attr("data-on-postid"),s={ajaxAct:"pager",on_postid:o,page:a,pageOpts:i};wpcr3.ajaxPost(c,s,function(e,t){e||(p.html(t.output),n.remove(),r("html,body").animate({scrollTop:p.offset().top-100}))})};void 0!==r("body").on?r(".wpcr3_respond_1").on("click",".wpcr3_pagination .wpcr3_a",c):r(".wpcr3_respond_1 .wpcr3_pagination .wpcr3_a").live("click",c);var n=r(".wpcr3_div_2"),p=n.find(".wpcr3_submit_btn");p.click(wpcr3.submit),wpcr3.clearFields()},jQuery(function(){wpcr3.init()});