/**
 * Responsive Pricing Table Admin JS (minified)
 */

;(function($){$(document).ready(function(){(function(original){jQuery.fn.clone=function(){var result=original.apply(this,arguments),my_textareas=this.find('textarea').add(this.filter('textarea')),result_textareas=result.find('textarea').add(result.filter('textarea')),my_selects=this.find('select').add(this.filter('select')),result_selects=result.find('select').add(result.filter('select'));for(var i=0,l=my_textareas.length;i<l;++i)$(result_textareas[i]).val($(my_textareas[i]).val());for(var i=0,l=my_selects.length;i<l;++i)result_selects[i].selectedIndex=my_selects[i].selectedIndex;return result}})(jQuery.fn.clone);var pluginFolderSlug='responsive-pricing-table-pro';$('.dmb_color_picker').each(function(i,obj){$(this).wpColorPicker()});function refreshPlanCountRelatedUI(){($('.dmb_main').not('.dmb_empty_plan').length>0)?$('.dmb_no_plan_notice').hide():$('.dmb_no_plan_notice').show();($('.dmb_main').not('.dmb_empty_plan').length>4)?$('.dmb_add_row, .clone-row').hide():$('.dmb_add_row, .clone-row').show()}
refreshPlanCountRelatedUI();var hexDigits=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");function dmb_rgb2hex(rgb){rgb=rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);return "#"+dmb_hex(rgb[1])+dmb_hex(rgb[2])+dmb_hex(rgb[3])}
function dmb_hex(x){return isNaN(x)?"00":hexDigits[(x-x%16)/16]+hexDigits[x%16]}
function dmb_strip_tags(input,allowed){allowed=(((allowed||'')+'').toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join('');var tags=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,commentsAndPhpTags=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return input.replace(commentsAndPhpTags,'').replace(tags,function($0,$1){return allowed.indexOf('<'+$1.toLowerCase()+'>')>-1?$0:''})}
function rpt_equalize(){$('.rpt_plans').each(function(){var current_plan=$(this);if(parseInt($(window).width())>640){if(current_plan.hasClass('rpt_plan_eq')){var titles=[],heads=[],features=[];var biggestTitle=[],biggestHead=[],biggestFeatures=[];current_plan.find('.rpt_title').each(function(){var current_title=$(this);titles.push(current_title.outerHeight())});current_plan.find('.rpt_head').each(function(){var current_head=$(this);heads.push(current_head.outerHeight())});current_plan.find('.rpt_features').each(function(){var current_features=$(this);features.push(current_features.outerHeight())});biggestTitle=Math.max.apply(Math,titles);biggestHead=Math.max.apply(Math,heads);biggestFeatures=Math.max.apply(Math,features);current_plan.find('.rpt_title').outerHeight(biggestTitle);current_plan.find('.rpt_head').outerHeight(biggestHead);current_plan.find('.rpt_features').outerHeight(biggestFeatures)}}else{current_plan.find('.rpt_title').outerHeight('auto');current_plan.find('.rpt_head').outerHeight('auto');current_plan.find('.rpt_features').outerHeight('auto')}})}
$(window).resize(function(){rpt_equalize()});$('.dmb_icon_data_url').each(function(i,obj){var imgUrl=$(this).attr("data-icon");if(imgUrl!=''){$(this).siblings('.dmb_icon_field').val(imgUrl);$("<img src='"+imgUrl+"' class='dmb_icon_img'/><div class='dmb_clearfix imgClearfix'></div>").insertAfter($(this).parent().find('.dmb_field_title'));$(this).parent().append('<a class="dmb_remove_icon_btn dmb_small_button_secondary" href="#"><span class="dashicons dashicons-no-alt"></span></a>')}});$('.dmb_main').not('.dmb_empty_plan').each(function(i,obj){var featureDump=$(this).find('.dmb_feature_dump').val();var features=$(this).find('.dmb_features');if(featureDump!=''){featureDump=featureDump+'\n';$.each(featureDump.split("\n").slice(0,-1),function(index,item){cleanedItem=item.replace(')--(',',');features.append('<div class="dmb_feature"><input class="dmb_field dmb_feature_field" type="text" value="" /><a class="dmb_remove_feature_btn" href="#"><span class="dashicons dashicons-no-alt"></span></a></div>');features.find('.dmb_feature_field:last').val(cleanedItem)})}});$('.dmb_remove_icon_btn').live("click",function(e){$(this).parent().find('.dmb_icon_img').remove();$(this).parent().find('.imgClearfix').remove();$(this).parent().find('.dmb_icon_field').val('');$(this).remove();return!1});$('.dmb_upload_icon_btn').click(function(){upload_button=$(this);isAlreadyImg=$(this).siblings('.dmb_icon_data_url').attr("data-icon");window.send_to_editor=function(html){imgUrl=$(html).attr('src');if(isAlreadyImg){upload_button.parent().find('.dmb_icon_img').remove();upload_button.parent().find('.dmb_remove_icon_btn').remove()}
upload_button.parent().append('<a class="dmb_remove_icon_btn dmb_small_button_secondary" href="#"><span class="dashicons dashicons-no-alt"></span></a>');$("<img src='"+imgUrl+"' class='dmb_icon_img'/><div class='dmb_clearfix imgClearfix'></div>").insertAfter(upload_button.parent().find('.dmb_field_title'));upload_button.siblings('.dmb_icon_field').val(imgUrl);tb_remove()}
tb_show('','media-upload.php?type=image&amp;TB_iframe=true');return!1});$('.dmb_remove_feature_btn').click(function(e){removeButton=$(this);removedFeature=$(this).closest('.dmb_feature').find('.dmb_feature_field');removedFeature.remove();featureList=removeButton.closest('.dmb_main').find('.dmb_feature_field');remainingFeatures=[];featureDump=$(this).closest('.dmb_main').find('.dmb_feature_dump');if(featureList.length==0){featureDump.val('');removeButton.parent().remove();return!1}else{featureList.each(function(i,obj){if($(this).val()){var cleanFeature=$(this).val().split(',').join(')--(');remainingFeatures.push(cleanFeature);var newFeatures=remainingFeatures.toString().split(',').join("\n").split(')--(').join(',');featureDump.val(newFeatures)}});removeButton.parent().remove();return!1}});$('.dmb_add_feature').on('click',function(){var lastFeature=$(this).siblings('.dmb_features').find('.dmb_feature:last .dmb_feature_field');if(lastFeature.val()!=''){var feature=$('.empty-feature').clone(!0);feature.removeClass('empty-feature').show();$(this).siblings('.dmb_features').append(feature);feature.find('.dmb_feature_field').focus();return!1}else{lastFeature.focus()}
return!1});$('.dmb_feature_field').live("keyup",function(e){featureUpdated=$(this);featuresUpdated=$(this).parent().parent().siblings('.dmb_feature_dump');var featuresList=featureUpdated.parent().parent().find('.dmb_feature_field'),features=[];if(featuresList.length<1){featuresUpdated.val('')}else{featuresList.each(function(i,obj){if($(this).val()){var cleanFeature=$(this).val().split(',').join(')--(');features.push(cleanFeature);var newFeatures=features.toString().split(',').join("\n").split(')--(').join(',');featuresUpdated.val(newFeatures)}})}});$('.dmb_add_row').on('click',function(){var row=$('.dmb_empty_plan').clone(!0);row.removeClass('dmb_empty_plan').addClass('dmb_main').show();row.find('.emptyDump').removeClass('emptyDump').addClass('dmb_feature_dump');row.insertBefore($('.dmb_empty_plan'));row.find('.dmb_title_of_plan').focus();row.find('.dmb_color_picker_ready').removeClass('.dmb_color_picker_ready').addClass('.dmb_color_picker').wpColorPicker().css({'padding':'3px'});row.find('.dmb_handle_title').html(objectL10n.untitled);refreshPlanCountRelatedUI();return!1});$('.dmb_remove_row_btn').click(function(e){$(this).closest('.dmb_main').remove();refreshPlanCountRelatedUI();return!1});$('.dmb_handle').click(function(e){$(this).siblings('.dmb_inner').slideToggle(50);($(this).hasClass('closed'))?$(this).removeClass('closed'):$(this).addClass('closed');return!1});$('.dmb_collapse_plans').click(function(e){$('.dmb_handle').each(function(i,obj){if(!$(this).closest('.dmb_empty_plan').length){if($(this).hasClass('closed')){}else{$(this).siblings('.dmb_inner').slideToggle(50);$(this).addClass('closed')}}});return!1});$('.dmb_expand_plans').click(function(e){$('.dmb_handle').each(function(i,obj){if($(this).hasClass('closed')){$(this).siblings('.dmb_inner').slideToggle(50);$(this).removeClass('closed')}});return!1});$('.dmb_move_row_down').click(function(e){if($(this).closest('.dmb_main').next().hasClass('dmb_main')){var movingPlan=$(this).closest('.dmb_main').clone(!0);movingPlan.insertAfter($(this).closest('.dmb_main').next());var rgbColorToMove=movingPlan.find('.wp-color-result').css('backgroundColor');movingPlan.find('.wp-picker-container').remove();movingPlan.find('.dmb_color_box').append('<input class="dmb_color_picker dmb_field" name="plan_colors[]" type="text" value="'+dmb_rgb2hex(rgbColorToMove)+'" />');movingPlan.find('.dmb_color_picker').wpColorPicker();$(this).closest('.dmb_main').remove()}
return!1});$('.dmb_move_row_up').click(function(e){if($(this).closest('.dmb_main').prev().hasClass('dmb_main')){var movingPlan=$(this).closest('.dmb_main').clone(!0);movingPlan.insertBefore($(this).closest('.dmb_main').prev());var rgbColorToMove=movingPlan.find('.wp-color-result').css('backgroundColor');movingPlan.find('.wp-picker-container').remove();movingPlan.find('.dmb_color_box').append('<input class="dmb_color_picker dmb_field" name="plan_colors[]" type="text" value="'+dmb_rgb2hex(rgbColorToMove)+'" />');movingPlan.find('.dmb_color_picker').wpColorPicker();$(this).closest('.dmb_main').remove()}
return!1});$('.dmb_clone_row').click(function(e){var clone=$(this).closest('.dmb_main').clone(!0);clone.insertAfter($(this).closest('.dmb_main'));clone.find('.dmb_handle_title').html(clone.find('.dmb_title_of_plan').val()+' ('+objectL10n.copy+')');clone.find('.dmb_title_of_plan').focus();var rgbColorToMove=$(this).closest('.dmb_main').find('.wp-color-result').css('backgroundColor');clone.find('.wp-picker-container').remove();clone.find('.dmb_color_box').append('<input class="dmb_color_picker dmb_field" name="plan_colors[]" type="text" value="'+dmb_rgb2hex(rgbColorToMove)+'" />');clone.find('.dmb_color_picker').wpColorPicker();refreshPlanCountRelatedUI();return!1});$('.dmb_title_of_plan').each(function(i,obj){if($(this).val()!=''){var handleTitle=$(this).closest('.dmb_main').find('.dmb_handle_title');handleTitle.html($(this).val())}});$('.dmb_title_of_plan').live("keyup",function(e){var titleField=$(this);var handleTitle=titleField.closest('.dmb_main').find('.dmb_handle_title');(titleField.val()!='')?handleTitle.html(titleField.val()):handleTitle.html(objectL10n.untitled)});$('.dmb_text_settings_box_show').click(function(){$('.dmb_text_settings_box').toggle()});$('.dmb_show_preview_table').click(function(){var settings={};settings.planCount=$('.dmb_main').not('.dmb_empty_plan').size();settings.tableCurrency=$("input[name='table_currency']").val();settings.tableEq=$("select[name='table_equalizer'] option:selected").val();settings.tableSkin=$("select[name='table_skin'] option:selected").val();settings.fontTitleAlignment=$("select[name='font_title_alignment'] option:selected").val();settings.fontSizeTitle=$("select[name='font_size_title'] option:selected").val();settings.fontSizeSubtitle=$("select[name='font_size_subtitle'] option:selected").val();settings.fontSizeDescription=$("select[name='font_size_description'] option:selected").val();settings.fontSizePrice=$("select[name='font_size_price'] option:selected").val();settings.fontSizeRecurrence=$("select[name='font_size_recurrence'] option:selected").val();settings.fontSizeButton=$("select[name='font_size_button'] option:selected").val();settings.fontSizeFeatures=$("select[name='font_size_features'] option:selected").val();if(settings.fontSizeTitle=='small'){settings.fontSizeTitle=' rpt_sm_title'}
else if(settings.fontSizeTitle=='tiny'){settings.fontSizeTitle=' rpt_xsm_title'}
else{settings.fontSizeTitle=''}
if(settings.fontSizeSubtitle=='small'){settings.fontSizeSubtitle=' rpt_sm_subtitle'}
else if(settings.fontSizeSubtitle=='tiny'){settings.fontSizeSubtitle=' rpt_xsm_subtitle'}
else{settings.fontSizeSubtitle=''}
if(settings.fontSizeDescription=='small'){settings.fontSizeDescription=' rpt_sm_description'}
else{settings.fontSizeDescription=''}
if(settings.fontSizePrice=='small'){settings.fontSizePrice=' rpt_sm_price'}
else if(settings.fontSizePrice=='tiny'){settings.fontSizePrice=' rpt_xsm_price'}
else if(settings.fontSizePrice=='supertiny'){settings.fontSizePrice=' rpt_xxsm_price'}
else{settings.fontSizePrice=''}
if(settings.fontSizeRecurrence=='small'){settings.fontSizeRecurrence=' rpt_sm_recurrence'}
else{settings.fontSizeRecurrence=''}
if(settings.fontSizeFeatures=='small'){settings.fontSizeFeatures=' rpt_sm_features'}
else{settings.fontSizeFeatures=''}
if(settings.fontSizeButton=='small'){settings.fontSizeButton=' rpt_sm_button'}
else{settings.fontSizeButton=''}
switch(settings.tableSkin){case 'lottacolor':settings.skinClass='rpt_style_loc';break;case 'spec':settings.skinClass='rpt_style_spec';break;case 'bitcolor':settings.skinClass='rpt_style_bic';break;case 'sweetlines':settings.skinClass='rpt_style_swl';break;default:settings.skinClass='rpt_style_basic'}
if(settings.tableEq=='no'||!settings.tableEq){settings.EqClass=''}
else{settings.EqClass='rpt_plan_eq'}
var preview_html='';preview_html+='<div id="rpt_pricr" style="margin-top:100px;" class="rpt_plans rpt_'+settings.planCount+'_plans '+settings.EqClass+' '+settings.skinClass+'">';preview_html+='<div class="'+settings.fontSizeTitle+' '+settings.fontSizeSubtitle+' '+settings.fontSizeDescription+' '+settings.fontSizePrice+' '+settings.fontSizeRecurrence+' '+settings.fontSizeButton+' '+settings.fontSizeFeatures+'">';preview_html+='<style>.rpt_plans .rpt_plan .rpt_foot{line-height:34px;} #rpt_pricr{font-family: "Helvetica Neue", Arial, sans-serif; font-weight: 300; line-height: 27px;}</style>'
$('.dmb_main').not('.dmb_empty_plan').each(function(i,obj){var fields={},plan={};fields.title=$(this).find(".dmb_title_of_plan").val();fields.subtitle=$(this).find(".dmb_subtitle_of_plan").val();fields.recurrence=$(this).find(".dmb_recurrence_of_plan").val();fields.price=$(this).find(".dmb_price_of_plan").val();fields.description=$(this).find(".dmb_description_of_plan").val();fields.icon=$(this).find(".dmb_icon_of_plan").attr('data-icon');fields.recommended=$(this).find(".dmb_switch_recommended").find(":selected").val();fields.free=$(this).find(".dmb_switch_free").find(":selected").val();fields.features=$(this).find(".dmb_features_of_plan").val();fields.buttonText=$(this).find(".dmb_button_text_of_plan").val();fields.customButton=$(this).find(".dmb_custom_button_of_plan").val();fields.color=dmb_rgb2hex($(this).find(".wp-color-result").css('backgroundColor'))||'#8dba09';if(fields.recommended&&fields.recommended=='yes'){plan.recoClass='rpt_recommended_plan';(settings.tableSkin=='sweetlines'||settings.tableSkin=='lottacolor')?plan.recoImg='<img class="rpt_recommended" src="../wp-content/plugins/'+pluginFolderSlug+'/inc/img/rpt_recommendedw.png"/>':plan.recoImg='<img class="rpt_recommended" src="../wp-content/plugins/'+pluginFolderSlug+'/inc/img/rpt_recommended.png"/>'}else{plan.recoImg='';plan.recoClass=''}(settings.tableSkin=='sweetlines')?preview_html+='<div style="border:4px solid '+fields.color+';" class="rpt_plan rpt_plan_'+i+' '+plan.recoClass+'">':preview_html+='<div class="rpt_plan rpt_plan_'+i+' '+plan.recoClass+'">';if(settings.tableSkin=='lottacolor'){plan.titleStyle='style="text-align:'+settings.fontTitleAlignment+'; opacity:0.8; background-color:'+fields.color+';"'}else if(settings.tableSkin=='sweetlines'){plan.titleStyle='style="text-align:'+settings.fontTitleAlignment+'; background-color:'+fields.color+';"'}else{plan.titleStyle='style="text-align:'+settings.fontTitleAlignment+';"'}
if(fields.title){preview_html+='<div '+plan.titleStyle+' class="rpt_title rpt_title_'+i+'">';if(fields.icon){preview_html+='<img height=30px width=30px src="'+fields.icon+'" class="rpt_icon rpt_icon_'+i+'"/> '}
preview_html+=fields.title;preview_html+=plan.recoImg+'</div>'}(settings.tableSkin=='lottacolor'||settings.tableSkin=='bitcolor')?plan.headStyle='style="background-color:'+fields.color+';"':plan.headStyle='';preview_html+='<div '+plan.headStyle+' class="rpt_head rpt_head_'+i+'">';if(fields.recurrence){preview_html+='<div class="rpt_recurrence rpt_recurrence_'+i+'">'+fields.recurrence+'</div>'}
if(fields.price){(settings.tableSkin=='sweetlines')?preview_html+='<div style="color:'+fields.color+'" class="rpt_price rpt_price_'+i+'">':preview_html+='<div class="rpt_price rpt_price_'+i+'">';if(fields.free=='yes'||fields.free=='on'){preview_html+='<span class="rpt_currency">';preview_html+='</span>'}else{if(settings.tableCurrency){preview_html+='<span class="rpt_currency">';preview_html+=settings.tableCurrency;preview_html+='</span>'}else{preview_html+='<span class="rpt_currency">';preview_html+='</span>'}}
preview_html+=fields.price;preview_html+='</div>'}(settings.tableSkin=='lottacolor'||settings.tableSkin=='bitcolor')?plan.subtitleColor='white':plan.subtitleColor=fields.color;if(fields.subtitle){preview_html+='<div style="color:'+plan.subtitleColor+';" class="rpt_subtitle rpt_subtitle_'+i+'">'+fields.subtitle+'</div>'}
if(fields.description){preview_html+='<div class="rpt_description rpt_description_'+i+'">'+fields.description+'</div>'}
preview_html+='<div style="clear:both;"></div>';preview_html+='</div>';if(fields.features){preview_html+='<div class="rpt_features rpt_features_'+i+'">';plan.features=[];plan.featureString=fields.features;plan.featureStringArray=plan.featureString.split("\n");plan.featureStringArray=plan.featureStringArray.map(function(el){return el.trim()});$.each(plan.featureStringArray,function(index,value){plan.features.push(dmb_strip_tags(value,'<strong></strong><br><br/></br><img><a>'))});$.each(plan.featureStringArray,function(smallKey,feature){if(feature){var check=feature.substr(0,2);if(check=='-n'){feature=feature.substr(2);var checkColor='#bbbbbb'}else{checkColor='black'}
if(feature.indexOf('{')!==-1&&feature.indexOf('}')!==-1){var tooltipText=feature.substring(feature.lastIndexOf("{")+1,feature.lastIndexOf("}"));feature=feature.replace(/{.+}/,'');feature+='<span class="rpt_tooltip_plus" style="color:'+fields.color+' !important;"> +</span>';(settings.tableSkin=='sweetlines')?preview_html+='<div style="color:'+checkColor+';" class="rpt_feature rpt_feature_'+i+'-'+smallKey+'"><a href="javascript:void(0)" style="color:'+checkColor+';" class="rpt_tooltip">':preview_html+='<div style="color:'+checkColor+';" class="rpt_feature rpt_feature_'+i+'-'+smallKey+'"><a href="javascript:void(0)" style="color:'+checkColor+';" class="rpt_tooltip">';preview_html+='<span class="intool"><b></b>'+tooltipText+'</span>';preview_html+=feature;preview_html+='</a></div>'}else{preview_html+='<div style="color:'+checkColor+';" class="rpt_feature rpt_feature_'+i+'-'+smallKey+'">';preview_html+=feature;preview_html+='</div>'}}});preview_html+='</div>';preview_html+='<div style="clear:both;"></div>'}
if(fields.customButton){if(settings.tableSkin=='basic'){preview_html+='<div class="rpt_custom_btn" style="background-color:'+fields.color+'">';preview_html+=fields.customButton;preview_html+='</div>'}
if(settings.tableSkin=='sweetlines'){preview_html+='<div class="rpt_custom_btn">';preview_html+=fields.customButton;preview_html+='</div>'}
if(settings.tableSkin!='basic'&&settings.tableSkin!='sweetlines'){preview_html+='<div class="rpt_custom_btn" style="background-color:'+fields.color+'">';preview_html+=fields.customButton;preview_html+='</div>'}}else{if(fields.buttonText){if(settings.tableSkin=='sweetlines'){preview_html+='<a href="#" style="background:white; color:'+fields.color+'" class="rpt_foot rpt_foot_'+i+'">'}else{preview_html+='<a href="#" style="background:'+fields.color+'" class="rpt_foot rpt_foot_'+i+'">'}}else{if(settings.tableSkin=='sweetlines'){preview_html+='<a style="background:white; color:'+fields.color+'" class="rpt_foot rpt_foot_'+i+'">'}else{preview_html+='<a style="background:'+fields.color+'" class="rpt_foot rpt_foot_'+i+'">'}}
preview_html+=fields.buttonText;preview_html+='</a>'}
preview_html+='</div>'});preview_html+='</div>';preview_html+='</div>';preview_html+='<div style="clear:both;"></div>';preview_html+='<div class="dmb_accuracy_preview_notice">'+objectL10n.previewAccuracy+'</div>';if(settings.planCount==0){$('#dmb_preview_table').append('<div class="dmb_no_plan_preview_notice">'+objectL10n.noPlan+'</div>')}else{$('#dmb_preview_table').append(preview_html);setTimeout(function(){rpt_equalize()})}
$('#dmb_preview_table').fadeIn(100)});$('.dmb_preview_table_close').click(function(){$('#dmb_preview_table #rpt_pricr, .dmb_accuracy_preview_notice, .dmb_no_plan_preview_notice').remove();$('#dmb_preview_table').fadeOut(100)})})})(jQuery);